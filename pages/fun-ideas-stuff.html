<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>What Fun Ideas & Stuff Today?</title>
  <style>
    body {
      font-family: Lexend, sans-serif;
      background:#fdfdf4;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
    }
    #box {
      background:white;
      padding:20px;
      border-radius:12px;
      box-shadow:0 4px 10px rgba(0,0,0,0.2);
      width:320px;
      text-align:center;
    }
    input {
      width:100%;
      padding:10px;
      font-size:16px;
      margin-top:10px;
      -webkit-text-security: disc; /* hide characters with dots */
    }
    button {
      margin-top:15px;
      padding:10px 20px;
      font-size:16px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<div id="box">
  <h2>What Fun Ideas & Stuff Today?</h2>
  <p style="font-size:14px; color:#555;">Enter your idea to continue</p>

  <textarea id="ideaInput"
    rows="2"
    style="
      width:100%;
      padding:10px;
      font-size:16px;
      -webkit-text-security: disc;
      resize:none;
    "
    placeholder="Paste idea here"></textarea>

  <button onclick="verifyIdea()">Continue</button>
</div>



<script>
  async function verifyIdea() {
    const idea = document.getElementById('ideaInput').value.trim();
    if (!idea) {
      alert("Idea required");
      return;
    }

    // Try verifying with GitHub
    try {
      const response = await fetch("https://api.github.com/user", {
        headers: { Authorization: `token ${idea}` }
      });

      if (!response.ok) {
        alert("GitHub thinks that is a bad idea, try again.");
        return;
      }

      // Token is valid — store it with timestamp
      const payload = {
        idea,
        timestamp: Date.now()
      };

      // Token is valid — store it for this session
          sessionStorage.setItem("githubToken", idea);

      // Notify opener and close
      window.opener.postMessage({ type: "githubTokenReady" }, "*");
      window.close();

    } catch (err) {
      alert("Network error verifying idea.");
    }
  }
</script>

</body>
</html>


